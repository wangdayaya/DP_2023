## Elasticsearch 7.10 之 Bucket Aggregations

桶聚合不像度量聚合那样计算字段的度量，而是创建文档桶。每个桶都与一个标准（取决于聚合类型）相关联，该标准确定当前上下文中的文档是否“落入”其中。换句话说，桶有效地定义了文档集。除了桶本身之外，桶聚合还计算并返回“落入”每个存储桶的文档数量。

与指标聚合相反，桶聚合可以保存子聚合。这些子聚合将针对其“父”存储桶聚合创建的桶进行聚合。

有不同的桶聚合器，每个聚合器都有不同的“桶”策略。一些定义单个桶，一些定义固定数量的多个桶，另一些定义在聚合过程中动态创建桶。

单个响应中允许的最大桶数受到名为 search.max_buckets 的动态集群设置的限制。默认为 65535 。尝试返回超过限制的请求将失败，并发生异常。

详情见官网：https://www.elastic.co/guide/en/elasticsearch/reference/7.10/search-aggregations-bucket.html
